#!/bin/sh

# Auto-tag with the new version after commit

PLUGIN_JSON=".claude-plugin/plugin.json"

# Get current version (already bumped by pre-commit)
version=$(grep -o '"version": "[^"]*"' "$PLUGIN_JSON" | head -1 | cut -d'"' -f4)

# Create tag if it doesn't exist
if ! git tag -l "v$version" | grep -q "v$version"; then
  git tag "v$version"
  echo "ğŸ·ï¸  Tagged: v$version"
fi
